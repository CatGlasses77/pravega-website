<!DOCTYPE html>

<html>

<head>
    <title>
        Lasya Registration Page
    </title>
    <link rel="stylesheet" href="style.css">
    <script type="text/javascript">
//        document.getElementById("submit-all-information").style.display = "hidden";
        
        var number_of_teams; //number of teams participating
        var college_name;
        
        //team_regis_box_i holds the code to be inserted for each team, given in box.html
        var team_regis_box_1 = '<div class="input-element" id="team-regis-box-';
        var team_regis_box_2 = '"><div class="input-element-text">Team number ';
        var team_regis_box_3 = '</div><div class="input-element-text">Team name:</div><input class="input-element-box team-name" type="text" required><div class="input-element-text">Category:</div><select name="category" size="1" class="input-element-box team-category" required><option value="aurum">Aurum</option><option value="Novare">Novare</option></select><div class="input-element-text">Contact info:</div><div class="input-element-text">E-mail ID:</div><input class="input-element-box email" type="email" required><div class="input-element-text">Phone number:</div><input class="input-element-box phone-number" type="text" required><div class="input-element-text">Number of participants (max. 15):</div><input class="input-element-box number-of-participants" type="number" required><button class="input-element-button" onclick="create_name_fields(';
        var team_regis_box_4 = ')">Submit</button></div>';
        
        var team_name_details = [];
        var team_category_details = [];
        var team_email_details = [];
        var team_phone_no_details = [];
        var team_no_participants_details = [];
        var team_participants_details = [];
        
        function create_boxes(){ //makes boxes for entering team details
            
            
            number_of_teams = document.getElementById("number-of-teams").value;
            college_name = document.getElementById("college-name").value;
            
            if(!(number_of_teams>0 && college_name)){ // number of teams >0
                alert("Invalid input! Please enter valid input.");
                number_of_teams = 0;
                return;
            }
            var regis_container_write = ""; //sum of all team_regis_box_i with team number inserted in appropriate places
            for(var i =0;i<number_of_teams;i++){
                regis_container_write += team_regis_box_1+(i+1).toString(10)+team_regis_box_2 + (i+1).toString(10)+ team_regis_box_3+(i+1).toString(10)+team_regis_box_4
            }
            document.getElementById("regis-box-container").innerHTML = regis_container_write;
            //writes regis_container_write to the regis_box_container div tag
            return;
            
        }
        
        function create_name_fields(team_number){
            var team_div_obj = document.getElementById("team-regis-box-" + (team_number).toString(10));
            var data = team_div_obj.innerHTML;
            data= data.split('<div class="input-element-text">Participant ')[0];
            var team_name = team_div_obj.getElementsByClassName("team-name")[0].value;
            var team_category = team_div_obj.getElementsByClassName("team-category")[0].value;
            var team_email = team_div_obj.getElementsByClassName("email")[0].value;
            var team_phone_no = team_div_obj.getElementsByClassName("phone-number")[0].value;
            var team_no_participants = team_div_obj.getElementsByClassName("number-of-participants")[0].value;
            if(team_no_participants>15 || team_no_participants<1){
                alert("Invalid number of participants! Please enter a number less than 15.");
                return;
            }
            if(!(team_name && team_email && team_phone_no)){
                alert("Invalid input. Please enter valid input.");
                return;
            }
            team_name_details.push([team_name,team_number]);
            team_category_details.push([team_category,team_number]);
            team_email_details.push([team_email,team_number]);
            team_phone_no_details.push([team_phone_no,team_number]);
            team_no_participants_details.push([team_no_participants,team_number]);
            var input_section_code_1 = '<div class="input-element-text">Participant ';
            var input_section_code_2 = ' name:</div><input class="input-element-box participant-name-';
            var input_section_code_3 = '" type="text">';
            for(var i = 0; i<team_no_participants;i++){
                var x = (i+1).toString(10);
                data += input_section_code_1 + x+ input_section_code_2+x+input_section_code_3;
            }
            data += '<button class="input-element-button" onclick="collect_name_data(' + team_number.toString(10) + ', '+ team_no_participants.toString(10) + ')">Submit</button></div>';
            team_div_obj.innerHTML = "";
            team_div_obj.innerHTML = data;
            team_div_obj.getElementsByClassName("team-name")[0].value = team_name;
            team_div_obj.getElementsByClassName("team-category")[0].value = team_category;
            team_div_obj.getElementsByClassName("email")[0].value = team_email;
            team_div_obj.getElementsByClassName("phone-number")[0].value = team_phone_no;
            team_div_obj.getElementsByClassName("number-of-participants")[0].value = team_no_participants;
            document.getElementById("submit-all-information").style.display = "inline";
        }
        
        function collect_name_data(team_number,no_participants){
            var team_div_obj = document.getElementById("team-regis-box-" + (team_number).toString(10));
            var name_list=[];
            for(var i=0;i<no_participants;i++){
                name_list.push(team_div_obj.getElementsByClassName("participant-name-" + (i+1).toString(10)).value);
            }
            team_participants_details.push([name_list,team_number]);
        }
        
        function submit_all_info(){
            //submit team name, email, phone numbers, participant count, and no of participants to server here. all elements of each array consists of [data,team_number]
            //End of registration page.
        }
        
    </script>


</head>

<!--
Classes:
    input-element: any element that is related to input
    input-element-text: text describing input
    input-element-box: input text box
    input-element-button: button for submitting and recording data
    Team details section: 
        email: for email input
        phone-number: for phone number input
        team-name: for team name input
        number-of-participants: number of participants in the ith team input

IDs:
    number-of-teams: id for input for number of teams
    regis-box-container: container for holding code that has team details.
    Team details section:
        team-regis-box-i: ith team's registration input div container
        number-of-participants: number of participants in the ith team input


Functions:
    create_boxes: makes individual team registration boxes
    create_name_fields: creates name field entry points for each team section, also adds name, email, phone_number to respective arrays

-->
    
    
<body>
    <header>Pravega '20 + extra links and stuff</header>
    <h1>Lasya Registration Page</h1>
    
    <div class="input-element">
        <div class="input-element-text">College name:</div>
        <input class="input-element-box" id="college-name" type="text" required>
    </div>
    
    
    <div class="input-element">
        <div class="input-element-text">Number of teams:</div>
        <input class="input-element-box" id="number-of-teams" type="number" required>
        <button class="input-element-button" onclick="create_boxes()">Submit</button>
    </div>
    <div class="input-element" id="regis-box-container">
        
    </div>
    
    <button id="submit-all-information" onclick="submit_all_info()" hidden>Submit All Information  </button>
    <!-- The automatic creation stuff here -->
    <footer>Pravega / links to external sites</footer>

</body>

</html>