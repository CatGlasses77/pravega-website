<!DOCTYPE html>

<html>

<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-151194721-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-151194721-1');
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description"
        content="pravega, pravega 2020,iisc, iisc bangalore, iisc fest, fest, fests in bangalore,bangalore,iisc">
    <meta name="Pravega" content="Pravega">

    <!--favicon icon-->
    <link rel="icon" type="image/png" href="../img/blue_dark_trans-01.png"> <!-- take a favicon.img for favicon -->

    <title>Lasya Registration | Pravega 2020, IISc Bangalore</title>


    <!--common style-->


    <link
        href="https://fonts.googleapis.com/css?family=Abel|Source+Sans+Pro:400,300,300italic,400italic,600,600italic,700,700italic,900,900italic,200italic,200"
        rel="stylesheet" type="text/css">
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <link href="../css/magnific-popup.css" rel="stylesheet">
    <link href="../css/shortcodes/shortcodes.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
    <link href="../css/style-responsive.css" rel="stylesheet">
    <link href="../css/default-theme.css" rel="stylesheet">
    <link href="../css/push-nav.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link href="main.css" rel="stylesheet" media="all">
    <link href="vendor/select2/select2.min.css" rel="stylesheet" media="all">
    <link href="vendor/datepicker/daterangepicker.css" rel="stylesheet" media="all">
    <link href="vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">
    <link href="vendor/font-awesome-4.7/css/font-awesome.min.css" rel="stylesheet" media="all">


</head>

<!--
Classes:
    input-element: any element that is related to input
    input-element-text: text describing input
    input-element-box: input text box
    input-element-button: button for submitting and recording data
    Team details section:
        email: for email input
        phone-number: for phone number input
        team-name: for team name input
        number-of-participants: number of participants

IDs:
    number-of-teams: id for input for number of teams
    regis-box-container: container for holding code that has team details.
    Team details section:
        team-regis-box: team's registration input div container


Functions:
    create_boxes: makes individual team registration boxes
    create_name_fields: creates name field entry points for each team section, also adds name, email, phone_number to respective arrays
-->


<body>
    <div class="wrapper">
        <!--header start-->
        <a href="#cd-nav" class="cd-nav-trigger">Menu
            <span class="cd-nav-icon"></span>
            <svg x="0px" y="0px" width="54px" height="54px" viewBox="0 0 54 54">
                <circle r="50" fill="transparent"></circle>
            </svg>
        </a>

        <div id="cd-nav" class="cd-nav">
            <div class="cd-navigation-wrapper">
                <div class="cd-half-block">
                    <h2>Navigation</h2>
                    <nav>
                        <ul class="cd-primary-nav">
                            <li class="active"><a href="../index.html">Home</a>
                            </li>
                            <li class="active"><a href="events.html">Registrations</a>
                            </li>
                            <li class="active"><a href="../events/events.html">Events</a>
                            </li>
                            <li class="active"><a href="#">Originals</a>
                            </li>
                            <li class="active"><a href="#">Archive</a>
                            </li>
                            <li class="active"><a href="../sponsors/sponsors.html">Sponsors</a>
                            </li>
                            <li class="active"><a href="#">Help</a>
                            </li>
                            <li class="active"><a href="#">Contact us</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
        <div class="page-wrapper bg-gra-03 p-t-45 p-b-50">
            <div class="wrapper wrapper--w790">
                <div class="card card-5">
                    <div class="card-heading">
                        <h2 class="title">Event Registration Form</h2>
                    </div>
                    <div class="card-body">
                        <form id="team-regis-box">
                            <div class="form-row">
                                <div class="name">Representing an institution?</div>
                                <div class="value">
                                    <div class="input-group">
                                        <div class="rs-select2 js-select-simple select--no-search">
                                            <select name="represent" size="1" id="represent">
                                                <!-- <option disabled="disabled" selected="selected">Choose option</option> -->
                                                <option>Yes</option>
                                                <option>No</option>
                                            </select>
                                            <div class="select-dropdown"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="name">Dance Academy/College Name:</div>
                                <div class="value">
                                    <div class="input-group">
                                        <input class="input--style-5" type="text" id="college-name">
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="name">Category</div>
                                <div class="value">
                                    <div class="input-group">
                                        <div class="rs-select2 js-select-simple select--no-search">
                                            <select name="category" size="1" id="team-category">
                                                <!-- <option disabled="disabled" selected="selected">Choose option</option> -->
                                                <option>Aurum</option>
                                                <option>Novare</option>
                                            </select>
                                            <div class="select-dropdown"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="name">Participation Format</div>
                                <div class="value">
                                    <div class="input-group">
                                        <div class="rs-select2 js-select-simple select--no-search">
                                            <select name="format" size="1" id="format">
                                                <!-- <option disabled="disabled" selected="selected">Choose option</option> -->
                                                <option>Solo</option>
                                                <option>Team</option>
                                            </select>
                                            <div class="select-dropdown"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="name">Team name/ Participant's name</div>
                                <div class="value">
                                    <div class="input-group">
                                        <input class="input--style-5" type="text" id="name" value="">
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="name">Email</div>
                                <div class="value">
                                    <div class="input-group">
                                        <input class="input--style-5" type="email" id="email" value="">
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="name">Phone-number</div>
                                <div class="value">
                                    <div class="input-group">
                                        <input class="input--style-5" type="number" id="phone-number" value="">
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="name">Link to Prelims Video</div>
                                <div class="value">
                                    <div class="input-group">
                                        <input class="input--style-5" type="text" id="prelims">
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="name">Number of groups expected to participate from your institution</div>
                                <div class="value">
                                    <div class="input-group">
                                        <input class="input--style-5" type="number" id="number-of-groups"
                                            placeholder="Keep 0 for solo">
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="name">Number of Participants</div>
                                <div class="value">
                                    <div class="input-group">
                                        <input class="input--style-5" type="number" id="number-of-participants"
                                            placeholder="Keep 0 for solo">
                                    </div>
                                </div>
                            </div>


                            <div>
                                <button id="buttonA" onclick="create_name_fields()" class="btn btn--radius-2 btn--red"
                                    value="Add">Add</button>
                            </div>

                            <!--

						<div class="form-row"><div class="name">Participant-name </div> <div class="value"><div class="input-group"><input class="input--style-5" type="text" id="participant-1"></div></div></div>
						 -->


                        </form>
                    </div>
                    <div>
                        <input type="button" class="btn btn--radius-2 btn--red" id="submit-button"
                            onclick="collect_name_data(team_no_participants)" value="Submit">
                    </div>
                </div>
            </div>

            <footer id="footer">&nbsp;</footer>

        </div>
    </div>

    <script type="text/javascript">

        var clicks = 0;

        //details to be sent to server START
        var represent;
        var college_name;
        var name;
        var format;
        var team_category;
        var team_email;
        var team_phone_no;
        var number_of_groups;
        var prelim_details;
        var team_no_participants;
        var team_participants_details;

        //details to be sent to server END


        function create_name_fields() {
            var data = document.getElementById("team-regis-box").innerHTML;
            data = data.split('<div class="input-element-text">Participant ')[0];
            represent = document.getElementById("represent").value;
            college_name = document.getElementById("college-name").value;
            name = document.getElementById("name").value;
            format = document.getElementById("format").value;
            team_email = document.getElementById("email").value;
            number_of_groups = document.getElementById("number-of-groups").value;
            team_phone_no = document.getElementById("phone-number").value;
            team_no_participants = document.getElementById("number-of-participants").value;
            team_category = document.getElementById("team-category").value;
            prelim_details = document.getElementById("prelims").value;
            if (!(1 && college_name)) {
                alert("Fill the name please");
                clicks--
                return;
            }

            if (!(team_email)) {
                alert("Please fill your email");
                clicks--;

                return;
            }
            if (!(team_phone_no)) {
                alert("Please fill your mobile number");
                clicks--;
                return;
            }
            //     }
            // if(1000000000>=team_phone_no || team_phone_no>=10000000000){
            //         alert("Enter a Valid mobile number ");
            //         clicks--;
            //         return;
            //     }
            if (team_no_participants > 14 || team_no_participants < 0) {
                alert("Number of other participants must be between 0 and 14.");
                clicks--
                return;
            }


            var input_section_code_1 = '<div class="form-row"><div class="name">Participant ';
            var input_section_code_2 = ' name </div> <div class="value"><div class="input-group"><input class="input--style-5" type="text" id="participant-';
            var input_section_code_3 = '"></div></div></div>';
            for (var i = 0; i < team_no_participants; i++) {
                var x = (i + 1).toString(10);
                data += input_section_code_1 + x + input_section_code_2 + x + input_section_code_3;
            }
            document.getElementById("team-regis-box").innerHTML = "";
            document.getElementById("team-regis-box").innerHTML = data;
            document.getElementById("represent").value = represent;
            document.getElementById("college-name").value = college_name;
            document.getElementById("format").value = format;
            document.getElementById("name").value = name;
            document.getElementById("email").value = team_email;
            document.getElementById("phone-number").value = team_phone_no;
            document.getElementById("team-category").value = team_category;
            document.getElementById("number-of-groups").value = number_of_groups;
            document.getElementById("number-of-participants").value = team_no_participants;
            document.getElementById("prelims").value = prelim_details;
            document.getElementById("footer").style.display = "hidden";
            document.getElementById("buttonA").disabled = true;
        }

        function collect_name_data(no_participants) {

            var name_list = [];
            for (var i = 0; i < no_participants; i++) {
                var temp = document.getElementById("participant-" + (i + 1).toString(10)).value; //This line is killing the code
                if (!(temp && i + 1)) { //BUG BUG BUG: checking if temp is empty and killing the code if it is. problem is that it's killing the code even if its non empty. problem possibly lies with the initiating statement. Please fix it.
                    return;
                }
                name_list.push(temp);
            }
            team_participants_details = name_list;
            submit_all_info();
        }

        function submit_all_info() {
            var body = {
                "noi": college_name,
                "event": "lasya",
                "members": team_participants_details,
                "name": name,
                "phone": team_phone_no,
                "email": team_email,
                "meta": {
                    "category": team_category,
                    "prelims": prelim_details,
                    "represent": represent,
                    "format": format,
                    "number-of-groups": number_of_groups,
                }
            }
            postData(body);

        }

        function postData(bod) {
            var xhr = new XMLhttpsRequest();
            var theUrl = "https://www.pravega.org/api/register";
            xhr.open("POST", theUrl);
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            console.log(bod);
            xhr.send(JSON.stringify(bod));
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    window.location.replace('success.html');
                }
            }
            //
        }
    </script>


    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/menuzord.js"></script>
    <script src="../js/jquery.flexslider-min.js"></script>
    <script src="../js/owl.carousel.min.js"></script>
    <script src="../js/jquery.isotope.js"></script>
    <script src="../js/jquery.magnific-popup.min.js"></script>
    <script src="../js/jquery.countTo.js"></script>
    <script src="../js/visible.js"></script>
    <script src="../js/smooth.js"></script>
    <script src="../js/wow.min.js"></script>
    <script src="../js/imagesloaded.js"></script>
    <!--common scripts-->
    <script src="../js/scripts.js"></script>
    <script src="../js/modernizr.js"></script>
    <!-- partial -->
    <script>
        jQuery(document).ready(function ($) {
            var isLateralNavAnimating = false;

            //open/close lateral navigation
            $('.cd-nav-trigger').on('click', function (event) {
                event.preventDefault();
                //stop if nav animation is running
                if (!isLateralNavAnimating) {
                    if ($(this).parents('.csstransitions').length > 0) isLateralNavAnimating = true;

                    $('body').toggleClass('navigation-is-open');
                    $('.cd-navigation-wrapper').one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function () {
                        //animation is over
                        isLateralNavAnimating = false;
                    });
                }
            });
        });
    </script>
    <!-- partial -->
    <script src="events.js"></script>
    <!--    footer is for extra space at the bottom. weird glitch occurs with the background gradient if removed-->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/menuzord.js"></script>
    <script src="../js/jquery.flexslider-min.js"></script>
    <script src="../js/owl.carousel.min.js"></script>
    <script src="../js/jquery.isotope.js"></script>
    <script src="../js/jquery.magnific-popup.min.js"></script>
    <script src="../js/jquery.countTo.js"></script>
    <script src="../js/visible.js"></script>
    <script src="../js/smooth.js"></script>
    <script src="../js/wow.min.js"></script>
    <script src="../js/imagesloaded.js"></script>
    <!--common scripts-->
    <script src="../js/scripts.js"></script>
    <script src="../js/modernizr.js"></script>

    <!-- Jquery JS-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <!-- Vendor JS-->
    <script src="vendor/select2/select2.min.js"></script>
    <script src="vendor/datepicker/moment.min.js"></script>
    <script src="vendor/datepicker/daterangepicker.js"></script>

    <!-- Main JS-->
    <script src="js/global.js"></script>
</body>

</html>
